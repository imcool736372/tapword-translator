<!-- Modal Success Template for Fragment Translation -->
<div class="ai-translator-modal-view" data-app-edition="{{APP_EDITION}}">
    <style>
        [data-app-edition="community"] [data-community-hide="speech"] {
            display: none !important;
        }
    </style>
    <!-- Top Row: Action Buttons and Close -->
    <div class="ai-translator-modal-top-row">
        <!-- Left Group: Action Buttons Only (no word section for fragments) -->
        <div class="ai-translator-modal-left-group">
            <div class="ai-translator-modal-phonetic-group">
                <!-- Refresh and Delete Buttons -->
                <button class="ai-translator-modal-action-btn ai-translator-refresh-btn" data-action="refresh"
                    title="{{i18n:modal.button.refresh}}">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M13.5 8C13.5 11.0376 11.0376 13.5 8 13.5C4.96243 13.5 2.5 11.0376 2.5 8C2.5 4.96243 4.96243 2.5 8 2.5C9.7 2.5 11.2 3.3 12.2 4.5M12.2 4.5V2M12.2 4.5H9.7"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>

                <button class="ai-translator-modal-action-btn ai-translator-delete-btn" data-action="delete"
                    title="{{i18n:modal.button.delete}}">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 4H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <path d="M5.5 4V3C5.5 2.44772 5.94772 2 6.5 2H9.5C10.0523 2 10.5 2.44772 10.5 3V4"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <path d="M4.5 4V13C4.5 13.5523 4.94772 14 5.5 14H10.5C11.0523 14 11.5 13.5523 11.5 13V4"
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <path d="M6.5 7V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        <path d="M9.5 7V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Close Button on Right -->
        <div class="ai-translator-modal-close-btn-container">
            <button class="ai-translator-modal-close" title="{{i18n:modal.button.close}}">&times;</button>
        </div>
    </div>
</div>

<!-- Divider -->
<div class="ai-translator-modal-divider"></div>

<!-- Fragment Section - showing fragment text and translation -->
<div class="ai-translator-modal-fragment-section">
    <div class="ai-translator-modal-section-header">
        <div class="ai-translator-modal-section-label">{{i18n:modal.section.fragment}}</div>
        <!-- Speaker Button for Original Fragment (hidden for community builds) -->
        <button class="ai-translator-modal-action-btn ai-translator-speak-original-btn" data-action="speak-original"
            data-community-hide="speech" title="{{i18n:modal.button.pronounceOriginal}}">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.5 3.5L4.5 6H2.5C2.22 6 2 6.22 2 6.5V9.5C2 9.78 2.22 10 2.5 10H4.5L7.5 12.5V3.5Z"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                </path>
                <path d="M10 5.5C10.8284 6.32843 11.25 7.42857 11.25 8.5C11.25 9.57143 10.8284 10.6716 10 11.5"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                </path>
                <path d="M12 3.5C13.5 5 14 6.5 14 8.5C14 10.5 13.5 12 12 13.5" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </button>
        <!-- Update available label (conditionally shown) -->
        {{UPDATE_LABEL}}
    </div>
    <div class="ai-translator-modal-fragment-container">
        <!-- Original fragment text (not highlighted, just plain text) -->
        <p class="ai-translator-modal-fragment-original">{{FRAGMENT_TEXT}}</p>
        <!-- Fragment translation -->
        <div class="ai-translator-modal-fragment-translation">{{FRAGMENT_TRANSLATION}}</div>
    </div>
</div>

<!-- Full Sentence Section (conditionally shown when sentenceTranslation exists) -->
{{SENTENCE_SECTION}}